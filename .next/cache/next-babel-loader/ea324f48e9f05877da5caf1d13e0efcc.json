{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport '../RegisterForm.scss';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport StyledInput from '../../Input/Input';\nimport Button from '../../Button/Button';\nimport Router from 'next/router';\n\nvar PasswordForm = function PasswordForm(_ref) {\n  var user = _ref.user,\n      token = _ref.token;\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n      var res, _yield$res$json, _token;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return fetch(\"\".concat(process.env.API_URL, \"/api/signup\"), {\n                method: 'POST',\n                headers: {\n                  'Authorization': \"Bearer \".concat(token),\n                  'Content-type': 'application/json'\n                },\n                body: JSON.stringify({\n                  password: values.password\n                })\n              });\n\n            case 3:\n              res = _context.sent;\n\n              if (!(res.status === 200)) {\n                _context.next = 12;\n                break;\n              }\n\n              _context.next = 7;\n              return res.json();\n\n            case 7:\n              _yield$res$json = _context.sent;\n              _token = _yield$res$json.token;\n              document.cookie = \"lead=\".concat(true, \"; path=/\");\n              document.cookie = \"auth_token=\".concat(_token, \"; path=/\");\n              Router.push('/find-partners');\n\n            case 12:\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 14]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: \"card\"\n  }, __jsx(\"div\", {\n    className: \"title-container\"\n  }, \"  \", __jsx(\"h1\", {\n    className: \"card-title \"\n  }, \"Criar senha\")), __jsx(\"div\", {\n    className: \"card-content\"\n  }, __jsx(Formik, {\n    initialValues: {\n      email: user.email,\n      password: '',\n      confirmPassword: ''\n    },\n    onSubmit: handleSubmit,\n    render: function render(_ref3) {\n      var handleChange = _ref3.handleChange,\n          submitForm = _ref3.submitForm;\n      return __jsx(Form, {\n        className: \"form-container\"\n      }, __jsx(\"h2\", null, \"Ol\\xE1 \", user.name, \", para acessar o seu perfil basta criar uma senha.\"), __jsx(\"div\", {\n        className: \"row\"\n      }, __jsx(\"div\", {\n        className: \"form-group\"\n      }, __jsx(\"label\", null, \"Email\"), __jsx(Field, {\n        name: \"email\",\n        disabled: \"true\",\n        placeholder: \"Email\",\n        onChange: handleChange('email'),\n        component: StyledInput\n      }), __jsx(ErrorMessage, {\n        name: \"email\",\n        component: \"span\"\n      }))), __jsx(\"div\", {\n        className: \"row\"\n      }, __jsx(\"div\", {\n        className: \"form-group\"\n      }, __jsx(\"label\", null, \"Senha\"), __jsx(Field, {\n        name: \"password\",\n        placeholder: \"Senha\",\n        onChange: handleChange('password'),\n        type: \"password\",\n        component: StyledInput\n      }), __jsx(ErrorMessage, {\n        name: \"password\",\n        component: \"span\"\n      }))), __jsx(\"div\", {\n        className: \"row\"\n      }, __jsx(\"div\", {\n        className: \"form-group\"\n      }, __jsx(\"label\", null, \"Confirmar senha\"), __jsx(Field, {\n        name: \"confirmPassword\",\n        placeholder: \"Confirmar senha\",\n        onChange: handleChange('confirmPassword'),\n        type: \"password\",\n        component: StyledInput\n      }), __jsx(ErrorMessage, {\n        name: \"confirmPassword\",\n        component: \"span\"\n      }))), __jsx(\"div\", {\n        className: \"button-container\"\n      }, __jsx(Button, {\n        color: \"primary\",\n        onClick: function onClick() {\n          return submitForm();\n        }\n      }, \"Finalizar cadastro\")));\n    }\n  })));\n};\n\nexport default PasswordForm;","map":null,"metadata":{},"sourceType":"module"}