{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\Thais Linda\\\\juscredit-web\\\\containers\\\\BePart\\\\BePart.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport './BePart.scss';\nimport Button from '../../components/Button/Button';\nimport StyledInput from '../../components/Input/Input';\nimport { useState } from 'react';\nimport { Masks } from '../../utils/mask';\nimport Router from 'next/router';\nimport { Validators } from '../../utils/validators';\n\nvar BePart = function BePart() {\n  var _useState = useState(''),\n      documentInput = _useState[0],\n      setDocument = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(Masks.CPF),\n      mask = _useState3[0],\n      setMask = _useState3[1];\n\n  var _useState4 = useState(false),\n      shouldUpdateMask = _useState4[0],\n      setShouldUpdateMask = _useState4[1];\n\n  var _useState5 = useState(false),\n      userNotFound = _useState5[0],\n      setUserNotFound = _useState5[1];\n\n  var handleChange = function handleChange(e) {\n    if (shouldUpdateMask) {\n      setMask(Masks.CNPJ);\n      setShouldUpdateMask(false);\n    }\n\n    setDocument(e.target.value);\n  };\n\n  var beforeMaskedValueChange = function beforeMaskedValueChange(values) {\n    if (values.selection) {\n      var end = values.selection.end;\n\n      if (end === 14) {\n        setShouldUpdateMask(true);\n      }\n\n      if (mask === Masks.CNPJ && end === 13) {\n        setMask(Masks.CPF);\n      }\n    }\n\n    return _objectSpread({}, values);\n  };\n\n  var validateDocument = function validateDocument() {\n    var rawDocument, field, res, data, producer;\n    return _regeneratorRuntime.async(function validateDocument$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            rawDocument = documentInput.replace(/\\D/g, '');\n            setLoading(true);\n            field = rawDocument.length > 11 ? 'companyDocument' : 'contactDocument';\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(fetch(\"\".concat(process.env.API_URL, \"/api/produtores/items?\").concat(field, \"=\").concat(rawDocument, \"&&\")));\n\n          case 5:\n            res = _context.sent;\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(res.json());\n\n          case 8:\n            data = _context.sent;\n            setLoading(false);\n\n            if (data.length) {\n              producer = data[0];\n\n              if (producer) {\n                setUserNotFound(false);\n                Router.push('/signup/update-producer/[id]', \"/signup/update-producer/\".concat(producer.id));\n              }\n            } else {\n              setUserNotFound(true);\n              Router.push(\"/signup/producer?notFound=true&document=\".concat(documentInput));\n            }\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, _Promise);\n  };\n\n  return __jsx(\"main\", {\n    className: \"be-part-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Insira seu CPF ou CNPJ abaixo\"), __jsx(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Indique cr\\xE9ditos trabalhistas eleg\\xEDveis e ganhe conosco, por favor, insira seu CPF ou CNPJ:\"), __jsx(StyledInput, {\n    mask: mask,\n    beforeMaskedValueChange: beforeMaskedValueChange,\n    placeholder: \"Ex: 111.111.111-11...\",\n    value: documentInput,\n    onChange: handleChange,\n    className: userNotFound && 'not-found',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), userNotFound && __jsx(\"span\", {\n    className: \"user-not-found\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Cadastro n\\xE3o encontrado\"), documentInput.replace(/\\D/g, '').length === 11 && !Validators.cpf(documentInput) && __jsx(\"span\", {\n    className: \"user-not-found\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"CPF inv\\xE1lido\"), documentInput.replace(/\\D/g, '').length === 14 && !Validators.cnpj(documentInput) && __jsx(\"span\", {\n    className: \"user-not-found\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, \"CNPJ inv\\xE1lido\"), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), __jsx(Button, {\n    color: \"button disable\",\n    onClick: validateDocument,\n    disabled: !documentInput.length,\n    loading: loading.toString(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"Validar cadastro \")));\n};\n\nexport default BePart;","map":{"version":3,"sources":["C:/Users/Thais Linda/juscredit-web/containers/BePart/BePart.tsx"],"names":["Button","StyledInput","useState","Masks","Router","Validators","BePart","documentInput","setDocument","loading","setLoading","CPF","mask","setMask","shouldUpdateMask","setShouldUpdateMask","userNotFound","setUserNotFound","handleChange","e","CNPJ","target","value","beforeMaskedValueChange","values","selection","end","validateDocument","rawDocument","replace","field","length","fetch","process","env","API_URL","res","json","data","producer","push","id","cpf","cnpj","toString"],"mappings":"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","sourcesContent":["import './BePart.scss'\r\nimport Button from '../../components/Button/Button'\r\nimport StyledInput from '../../components/Input/Input';\r\nimport { useState, ChangeEvent } from 'react';\r\nimport { Masks } from '../../utils/mask';\r\nimport Link from 'next/link';\r\nimport Router from 'next/router';\r\nimport { Validators } from '../../utils/validators';\r\n\r\nconst BePart = () => {\r\n    const [documentInput, setDocument] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n    const [mask, setMask] = useState(Masks.CPF)\r\n    const [shouldUpdateMask, setShouldUpdateMask] = useState(false)\r\n    const [userNotFound, setUserNotFound] = useState(false)\r\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        if (shouldUpdateMask) {\r\n            setMask(Masks.CNPJ)\r\n            setShouldUpdateMask(false)\r\n        }\r\n        setDocument(e.target.value)\r\n    }\r\n    const beforeMaskedValueChange = (values: any) => {\r\n        if (values.selection) {\r\n            const { end } = values.selection;\r\n            if (end === 14) {\r\n                setShouldUpdateMask(true)\r\n            }\r\n            if (mask === Masks.CNPJ && end === 13) {\r\n                setMask(Masks.CPF)\r\n            }\r\n        }\r\n        return {\r\n            ...values\r\n        }\r\n    }\r\n\r\n    const validateDocument = async () => {\r\n        const rawDocument = documentInput.replace(/\\D/g, '')\r\n        setLoading(true);\r\n        const field = rawDocument.length > 11 ? 'companyDocument' : 'contactDocument'\r\n        const res = await fetch(`${process.env.API_URL}/api/produtores/items?${field}=${rawDocument}&&`)\r\n        const data = await res.json();\r\n        setLoading(false)\r\n        if (data.length) {\r\n            const producer = data[0]\r\n\r\n            if (producer) {\r\n                setUserNotFound(false)\r\n                Router.push('/signup/update-producer/[id]', `/signup/update-producer/${producer.id}`)\r\n            }\r\n        } else {\r\n            setUserNotFound(true)\r\n            Router.push(`/signup/producer?notFound=true&document=${documentInput}`)\r\n        }\r\n    }\r\n    return (\r\n        <main className=\"be-part-container\">\r\n            <div>\r\n                <h1>Insira seu CPF ou CNPJ abaixo</h1>\r\n                <label>\r\n                Indique créditos trabalhistas elegíveis e ganhe conosco, por favor, insira seu CPF ou CNPJ:\r\n                </label>\r\n                <StyledInput\r\n                    mask={mask}\r\n                    beforeMaskedValueChange={beforeMaskedValueChange}\r\n                    placeholder=\"Ex: 111.111.111-11...\"\r\n                    value={documentInput}\r\n                    onChange={handleChange}\r\n                    className={userNotFound && 'not-found'}\r\n                />\r\n                {userNotFound && <span className=\"user-not-found\">Cadastro não encontrado</span>}\r\n                {documentInput.replace(/\\D/g,'').length === 11 && !Validators.cpf(documentInput) &&<span className=\"user-not-found\">CPF inválido</span>}\r\n                {documentInput.replace(/\\D/g,'').length === 14 && !Validators.cnpj(documentInput) &&<span className=\"user-not-found\">CNPJ inválido</span>}\r\n                <br/>\r\n                <Button color=\"button disable\" onClick={validateDocument} disabled={!documentInput.length} loading={loading.toString()} >Validar cadastro </Button>\r\n               \r\n            </div>\r\n        </main>\r\n    );\r\n\r\n}\r\nexport default BePart;    "]},"metadata":{},"sourceType":"module"}