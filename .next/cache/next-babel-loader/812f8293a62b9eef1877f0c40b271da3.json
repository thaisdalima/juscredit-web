{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport InteractiveMap from \"../components/InteractiveMap/InteractiveMap\";\nimport fetch from 'isomorphic-unfetch';\nimport { useState } from \"react\";\n\nfunction FindPartners({\n  data\n}) {\n  const allPartners = data;\n  const {\n    0: partners,\n    1: setPartners\n  } = useState(allPartners);\n\n  const handleFilter = filters => {\n    const filterKeys = Object.keys(filters).filter(key => Boolean(filters[key]));\n\n    if (filterKeys.length) {\n      setPartners(allPartners.filter(partner => {\n        return filterKeys.every(key => filters[key] === partner[key]);\n      }));\n    } else {\n      setPartners(allPartners);\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(InteractiveMap, {\n    data: partners,\n    onFilterChange: handleFilter\n  }));\n}\n\nFindPartners.getInitialProps = async ctx => {\n  const res = await fetch('https://api.organis8.com.br/api/produtores/items');\n  const data = await res.json();\n  return {\n    data\n  };\n};\n\nexport default FindPartners;","map":null,"metadata":{},"sourceType":"module"}